{% extends "base.html" %}

{% load blog_tags %}

{% block title %}{{ post.title }}{% endblock %}
{% block content %}
  <p>
    <a href="{% url 'blog:post-list' %}">Back</a>
  </p>
  <h1>{{ post.title }}</h1>
  <small>
    {% for tag in post.tags.all %}
      <a href="{% url 'blog:post-list-by-tag' tag.slug %}">{{ tag|title }}</a>
      {% if not forloop.last %},{% endif %}
    {% endfor %}
  </small>
  <p>
    <small>Published {{ post.publish }} by {{ post.author }}</small>
  </p>
  <section>
    {{ post.body|markdown }}
  </section>
  <section>
    <ul>
      <li>
        <a href="{{ post.get_share_url }}">Share this post</a>
      </li>
      <li>
        <a href="{{ post.get_comment_url }}">Add a comment</a>
      </li>
    </ul>
  </section>
  <section>
    <h2>Similar posts</h2>
    <ul>
      {% for post in similar_posts %}
        <li>
          <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
        </li>
      {% empty %}
        <p>There are no similar posts yet.</p>
      {% endfor %}
    </ul>
  </section>
  <section>
    <h2>Comments</h2>
    {% for comment in comments %}
      <small>{{ comment.name }} on {{ comment.created }}</small>
      {{ comment.body|linebreaks }}
    {% empty %}
      <p>There are no comments</p>
    {% endfor %}
  </section>
{% endblock %}
